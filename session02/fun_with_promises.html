<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>

<h1>
    Implement the functions sinOrCosAsync() and doubleAsync() in an asynchronous manner on top of promises such that
    the test code prints out &quot;Exercise solved!&quot; in your browser's console.
</h1>

<script src="lib/q.js"></script>
<script type="text/javascript">

    function isInt(n) {
        return typeof n === 'number' && n % 1 == 0;
    }

    function isEvenAsync(n) {
        var deferred = Q.defer();

        setTimeout(function() {
            if (isInt(n)) {
                deferred.resolve({
                    n: n,
                    isEven: n % 2 === 0
                });
            }
            else {
                deferred.reject(new Error(n + ' is not a valid integer number!'));
            }
        }, 0);

        return deferred.promise;
    }

    function sinOrCosAsync(result) {
        // implement it
    }

    function doubleAsync(result) {
        // implement it
    }

    /**
     *
     *
     * TEST CODE
     *
     */
    isEvenAsync( Math.round( 463847362 * Math.random() ) )
    .then(sinOrCosAsync)
    .then(doubleAsync)
    .then(function(result) {
        if (result.n % 2 === 0) {
            if (result.doubled !== Math.sin(result.n) * 2) {
                throw new Error('Result is wrong!');
            }
        }
        else {
            if (result.doubled !== Math.cos(result.n) * 2) {
                throw new Error('Result is wrong!');
            }
        }

        console.log('Exercise solved!');
    })
    .catch(function(e) {
        console.log('An error occurred!', e);
    });

</script>

</body>
</html>